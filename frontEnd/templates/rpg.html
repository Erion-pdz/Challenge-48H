<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Mini-jeu RPG</title>
  <link rel="stylesheet" href="/assets/css/header.css">
  <link rel="stylesheet" href="/assets/css/rpg.css" />
</head>
<body>
  <header>
    <a href="/accueil" class="titre">Challenge 48h - Le coffre Ã  4 clÃ©s</a>
    <p class="timer">00:00</p>
    <a href="/connect">Se connecter</a>
  </header>
  <main>
    <h1>- RPG -</h1>
    <h1>Choisis ta classe</h1>
    <button onclick="selectClass('mage')">ğŸ§™ Mage</button>
    <button onclick="selectClass('warrior')">ğŸ›¡ï¸ Guerrier</button>
  </div>
  <input type="hidden" id="pseudo-joueur" value="" />

  <canvas id="gameCanvas" width="640" height="480"></canvas>

  <!-- Interface visible aprÃ¨s sÃ©lection -->
  <div id="interface" style="display: none;">

    <!-- HUD en haut Ã  gauche -->
    <div id="hud-top-left" class="hud-box" style="display: none; position: absolute; top: 10px; left: 10px;">
      <p>â¤ï¸ PV : <span id="playerHP">100 / 100</span></p>
      <p>ğŸ”· Mana : <span id="playerMana">100 / 100</span></p>
    </div>

    <!-- HUD en haut Ã  droite -->
    <div id="hud-top-right" class="hud-box" style="display: none; position: absolute; top: 10px; right: 10px;">
      <p>âš”ï¸ Attaque : <span id="playerAttack">10</span></p>
      <p>ğŸ›¡ï¸ DÃ©fense : <span id="playerDefense">5</span></p>
    </div>

    <!-- Barre de compÃ©tences en bas -->
    <div id="skillBar" style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: none;">
        <button id="skill1">1</button>
        <button id="skill2">2</button>
        <button id="skill3">3</button>
      </div>
      <canvas id="gameCanvas" width="640" height="480"></canvas>
    </div>
  
    <!-- Interface visible aprÃ¨s sÃ©lection -->
    <div id="interface" style="display: none;">
  
      <!-- HUD en haut Ã  gauche -->
      
  
      <!-- Barre de compÃ©tences en bas -->
    
  
        <div id="victoryScreen" style="
        display: none;
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background-color: rgba(0, 0, 0, 0.9);
        color: white;
        font-size: 36px;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 9999;
      ">
        <h1>ğŸ† Victoire !</h1>
        <p>ğŸ—ï¸ Tu as trouvÃ© une clÃ© contenant le chiffre : <strong style="font-size: 48px; color: #0f0;">9</strong></p>
        <button id="continueBtn" style="
        margin-top: 20px;
        font-size: 24px;
        padding: 10px 30px;
        background: #0f0;
        color: #000;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      ">
        Continuer
      </button>
      
      </div>
  </main>
    

  <!-- JS principal -->
  <script src="/assets/js/timer.js"></script>
  <script src="/assets/js/rpg.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const pseudo = params.get("pseudo");
    if (pseudo) {
      document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("pseudo-joueur").value = pseudo;
      });
    }
    document.addEventListener("DOMContentLoaded", () => {
    const pseudo = document.getElementById("pseudo-joueur").value;

    const btn = document.getElementById("continueBtn");
    if (btn && pseudo) {
      btn.addEventListener("click", () => {
        window.location.href = `/rpg?pseudo=${pseudo}`;
      });
    }
  });
  </script>
  
</body>
</html>
